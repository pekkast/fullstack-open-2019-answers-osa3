{"version":3,"sources":["components/TextFilter.js","components/TextInput.js","components/AddPersonForm.js","components/PersonList.js","services/persons.service.js","components/Notification.js","App.js","index.js"],"names":["TextFilter","_ref","text","handleChange","react_default","a","createElement","onChange","TextInput","label","placeholder","value","AddPersonForm","handleSubmit","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","components_TextInput","type","PersonDetails","person","handleClick","name","number","onClick","PersonList","_ref2","persons","removeHandler","map","PersonList_PersonDetails","key","id","persons_service","axios","get","then","response","data","post","headers","location","put","concat","delete","Notification","isError","className","join","App","_useState","useState","_useState2","Object","slicedToArray","setPersons","_useState3","_useState4","setNewName","_useState5","_useState6","setNewNumber","_useState7","_useState8","searchString","setSearchString","_useState9","_useState10","errorMessage","setErrorMessage","_useState11","_useState12","successMessage","setSuccessMessage","useEffect","personsService","setError","error","defaultMessage","message","setTimeout","setSuccess","personExists","findIndex","p","visiblePersons","filter","toLowerCase","indexOf","components_TextFilter","event","target","components_Notification","components_AddPersonForm","preventDefault","window","confirm","idx","update","objectSpread","newState","toConsumableArray","catch","tryUpdatePerson","components_PersonList","updated","splice","ReactDOM","render","src_App","document","getElementById"],"mappings":"4NAKeA,EAHI,SAAAC,GAAA,IAAEC,EAAFD,EAAEC,KAAMC,EAARF,EAAQE,aAAR,OACfC,EAAAC,EAAAC,cAAA,WAAMJ,EAAN,IAAYE,EAAAC,EAAAC,cAAA,SAAOC,SAAUJ,MCMlBK,EAPG,SAAAP,GAAA,IAAEQ,EAAFR,EAAEQ,MAAOC,EAATT,EAASS,YAAaC,EAAtBV,EAAsBU,MAAOR,EAA7BF,EAA6BE,aAA7B,OACdC,EAAAC,EAAAC,cAAA,WACIF,EAAAC,EAAAC,cAAA,aAAQG,GACRL,EAAAC,EAAAC,cAAA,SAAOI,YAAaA,EAAaC,MAAOA,EAAOJ,SAAUJ,MCQlDS,EAVO,SAAAX,GAAA,IAAGY,EAAHZ,EAAGY,aAAcC,EAAjBb,EAAiBa,QAASC,EAA1Bd,EAA0Bc,iBAAkBC,EAA5Cf,EAA4Ce,UAAWC,EAAvDhB,EAAuDgB,mBAAvD,OAClBb,EAAAC,EAAAC,cAAA,QAAMY,SAAUL,GACZT,EAAAC,EAAAC,cAACa,EAAD,CAAWV,MAAM,QAAQC,YAAY,kBAAeC,MAAOG,EAASX,aAAcY,IAClFX,EAAAC,EAAAC,cAACa,EAAD,CAAWV,MAAM,UAAUC,YAAY,cAAcC,MAAOK,EAAWb,aAAcc,IACrFb,EAAAC,EAAAC,cAAA,WACIF,EAAAC,EAAAC,cAAA,UAAQc,KAAK,UAAb,kBCNNC,EAAgB,SAAApB,GAAA,IAAGqB,EAAHrB,EAAGqB,OAAQC,EAAXtB,EAAWsB,YAAX,OAClBnB,EAAAC,EAAAC,cAAA,UACIF,EAAAC,EAAAC,cAAA,YAAOgB,EAAOE,KAAd,KAAsBF,EAAOG,OAA7B,KACArB,EAAAC,EAAAC,cAAA,UAAQoB,QAAS,kBAAMH,EAAYD,KAAnC,YAUOK,EANI,SAAAC,GAAA,IAAEC,EAAFD,EAAEC,QAASC,EAAXF,EAAWE,cAAX,OACf1B,EAAAC,EAAAC,cAAA,UACKuB,EAAQE,IAAI,SAAAT,GAAM,OAAIlB,EAAAC,EAAAC,cAAC0B,EAAD,CAAeC,IAAKX,EAAOY,GAAIZ,OAAQA,EAAQC,YAAaO,wBCa5EK,EArBA,kBAAMC,IAChBC,IAHc,gBAIdC,KAAK,SAAAC,GAAQ,OAAIA,EAASC,QAmBhBL,EAbA,SAACb,GAAD,OAAYc,IACtBK,KAXc,eAWGnB,GACjBgB,KAAK,SAAAC,GAAQ,OAAIH,IAAMC,IAAIE,EAASG,QAAQC,YAC5CL,KAAK,SAAAC,GAAQ,OAAIA,EAASC,QAUhBL,EARA,SAACb,GAAD,OAAYc,IACtBQ,IADsB,GAAAC,OAfR,eAeQ,KAAAA,OACDvB,EAAOY,IAAMZ,GAClCgB,KAAK,SAAAC,GAAQ,OAAIA,EAASC,QAMhBL,EAJA,SAACD,GAAD,OAAQE,IAClBU,OADkB,GAAAD,OAnBJ,eAmBI,KAAAA,OACMX,IACxBI,KAAK,SAAAC,GAAQ,OAAIA,EAASC,QCdhBO,EANM,SAAA9C,GAAA,IAAGC,EAAHD,EAAGC,KAAM8C,EAAT/C,EAAS+C,QAAT,OAAuB9C,EACxCE,EAAAC,EAAAC,cAAA,OAAK2C,UAAW,CAAC,eAAgBD,EAAU,UAAY,WAAWE,KAAK,MAClEhD,GAEL,MC2HWiD,EA1HH,WAAM,IAAAC,EACcC,mBAAS,IADvBC,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GACTvB,EADSyB,EAAA,GACAG,EADAH,EAAA,GAAAI,EAEcL,mBAAS,IAFvBM,EAAAJ,OAAAC,EAAA,EAAAD,CAAAG,EAAA,GAET5C,EAFS6C,EAAA,GAEAC,EAFAD,EAAA,GAAAE,EAGkBR,mBAAS,IAH3BS,EAAAP,OAAAC,EAAA,EAAAD,CAAAM,EAAA,GAGT7C,EAHS8C,EAAA,GAGEC,EAHFD,EAAA,GAAAE,EAIwBX,mBAAS,IAJjCY,EAAAV,OAAAC,EAAA,EAAAD,CAAAS,EAAA,GAITE,EAJSD,EAAA,GAIKE,EAJLF,EAAA,GAAAG,EAKwBf,mBAAS,MALjCgB,EAAAd,OAAAC,EAAA,EAAAD,CAAAa,EAAA,GAKTE,EALSD,EAAA,GAKKE,EALLF,EAAA,GAAAG,EAM4BnB,mBAAS,MANrCoB,EAAAlB,OAAAC,EAAA,EAAAD,CAAAiB,EAAA,GAMTE,EANSD,EAAA,GAMOE,EANPF,EAAA,GAShBG,oBAAU,WACRC,IAAwBvC,KAAK,SAAAE,GAAI,OAAIiB,EAAWjB,MAC/C,IAEH,IAAMsC,EAAW,SAACC,EAAOC,GACvB,IAAMC,EAAUF,EAAMxC,SAASC,KAAf,iBAAAK,OAAuCkC,EAAMxC,SAASC,KAAKuC,OAAUC,EACrFT,EAAgBU,GAChBC,WAAW,WACTX,EAAgB,OAVQ,MActBY,EAAa,SAACF,GAClBN,EAAkBM,GAClBC,WAAW,WACTP,EAAkB,OAjBM,MAgFtBS,EAAe,SAAA5D,GAAI,OAAiD,IAA7CK,EAAQwD,UAAU,SAAAC,GAAC,OAAIA,EAAE9D,OAASA,KAWzD+D,EAAiB1D,EAAQ2D,OAAO,SAAAF,GAAC,OAAkE,IAA9DA,EAAE9D,KAAKiE,cAAcC,QAAQxB,EAAauB,iBAKrF,OACErF,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,6BACAF,EAAAC,EAAAC,cAACqF,EAAD,CAAYzF,KAAK,6BAAoBC,aALhB,SAAAyF,GAAK,OAAIzB,EAAgByB,EAAMC,OAAOlF,UAM3DP,EAAAC,EAAAC,cAAA,8BACAF,EAAAC,EAAAC,cAACwF,EAAD,CAAc5F,KAAMoE,EAActB,SAAS,IAC3C5C,EAAAC,EAAAC,cAACwF,EAAD,CAAc5F,KAAMwE,EAAgB1B,SAAS,IAC7C5C,EAAAC,EAAAC,cAACyF,EAAD,CACElF,aAtBe,SAAC+E,GAEpB,GADAA,EAAMI,iBACFZ,EAAatE,GACf,OAjDoB,SAACU,EAAMC,GAE7B,GADgB2D,EAAa5D,IAASyE,OAAOC,QAAP,GAAArD,OAAkBrB,EAAlB,0DACtC,CAIA,IAAM2E,EAAMtE,EAAQwD,UAAU,SAAAC,GAAC,OAAIA,EAAE9D,OAASA,IACxC4E,EAAM7C,OAAA8C,EAAA,EAAA9C,CAAA,GAAQ1B,EAAQsE,GAAhB,CAAsB1E,WAClCoD,EACUuB,GACP9D,KAAK,WACJ,IAAMgE,EAAQ/C,OAAAgD,EAAA,EAAAhD,CAAO1B,GACrByE,EAASH,GAAOC,EAChB3C,EAAW6C,GACX1C,EAAW,IACXG,EAAa,IACboB,EAAU,mBAAAtC,OAAiBuD,EAAO5E,SAEnCgF,MAAM,SAAAzB,GACLD,EAASC,EAAD,iBAAAlC,OAAyBuD,EAAO5E,KAAhC,wDACRqD,IAAwBvC,KAAK,SAAAE,GAAI,OAAIiB,EAAWjB,QA6B3CiE,CAAgB3F,EAASE,GA/DlC6D,EACU,CAAErD,KAiECV,EAjEKW,OAiEIT,IAhEnBsB,KAAK,SAAAhB,GACJmC,EAAW5B,EAAQgB,OAAOvB,IAC1BsC,EAAW,IACXG,EAAa,IACboB,EAAU,2BAAAtC,OAAyBvB,EAAOE,SAE3CgF,MAAM,SAAAzB,GACLD,EAASC,EAAOA,EAAME,SACtBJ,IAAwBvC,KAAK,SAAAE,GAAI,OAAIiB,EAAWjB,QAyEhD1B,QAASA,EACTC,iBAdmB,SAAA6E,GAAK,OAAIhC,EAAWgC,EAAMC,OAAOlF,QAepDK,UAAWA,EACXC,mBAfqB,SAAA2E,GAAK,OAAI7B,EAAa6B,EAAMC,OAAOlF,UAgB1DP,EAAAC,EAAAC,cAAA,qBACAF,EAAAC,EAAAC,cAACoG,EAAD,CAAY7E,QAAS0D,EAAgBzD,cAlDpB,SAACR,GAChB2E,OAAOC,QAAP,wBAAArD,OAAoCvB,EAAOE,KAA3C,aACFqD,EACUvD,EAAOY,IACdI,KAAK,WACJ,IAAMqE,EAAOpD,OAAAgD,EAAA,EAAAhD,CAAO1B,GACdsE,EAAMQ,EAAQtB,UAAU,SAAAC,GAAC,OAAIA,EAAEpD,KAAOZ,EAAOY,MACtC,IAATiE,GACFQ,EAAQC,OAAOT,EAAK,GAEtB1C,EAAWkD,GACXxB,EAAU,eAAAtC,OAAgBvB,EAAOE,SAElCgF,MAAM,SAAAzB,GACLD,EAASC,EAAD,iBAAAlC,OAAyBvB,EAAOE,KAAhC,yBACRqD,IAAwBvC,KAAK,SAAAE,GAAI,OAAIiB,EAAWjB,YCpF1DqE,IAASC,OAAO1G,EAAAC,EAAAC,cAACyG,EAAD,MAASC,SAASC,eAAe","file":"static/js/main.8270d34d.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst TextFilter = ({text, handleChange}) =>\r\n    <div>{text} <input onChange={handleChange} /></div>;\r\n\r\nexport default TextFilter;\r\n","import React from 'react';\r\n\r\nconst TextInput = ({label, placeholder, value, handleChange}) => (\r\n    <div>\r\n        <label>{label}</label>\r\n        <input placeholder={placeholder} value={value} onChange={handleChange} />\r\n    </div>\r\n);\r\n\r\nexport default TextInput;\r\n","import React from 'react';\r\nimport TextInput from './TextInput';\r\n\r\nconst AddPersonForm = ({ handleSubmit, newName, handleNameChange, newNumber, handleNumberChange }) => (\r\n    <form onSubmit={handleSubmit}>\r\n        <TextInput label=\"nimi:\" placeholder=\"Uusi henkilö\" value={newName} handleChange={handleNameChange} />\r\n        <TextInput label=\"numero:\" placeholder=\"01234567890\" value={newNumber} handleChange={handleNumberChange} />\r\n        <div>\r\n            <button type=\"submit\">lisää</button>\r\n        </div>\r\n    </form>\r\n);\r\n\r\nexport default AddPersonForm;\r\n","import React from 'react';\r\n\r\nconst PersonDetails = ({ person, handleClick }) =>  (\r\n    <li>\r\n        <span>{person.name}: {person.number} </span>\r\n        <button onClick={() => handleClick(person)}>poista</button>\r\n    </li>\r\n);\r\n\r\nconst PersonList = ({persons, removeHandler}) => (\r\n    <ul>\r\n        {persons.map(person => <PersonDetails key={person.id} person={person} handleClick={removeHandler} />)}\r\n    </ul>\r\n);\r\n\r\nexport default PersonList;\r\n","import axios from 'axios';\r\nconst apiBaseUrl = '/api/persons';\r\n\r\nconst getAll = () => axios\r\n    .get(apiBaseUrl)\r\n    .then(response => response.data);\r\n\r\nconst getOne = (id) => axios\r\n    .get(`${apiBaseUrl}/${id}`)\r\n    .then(response => response.data);\r\n\r\nconst create = (person) => axios\r\n    .post(apiBaseUrl, person)\r\n    .then(response => axios.get(response.headers.location))\r\n    .then(response => response.data);\r\n\r\nconst update = (person) => axios\r\n    .put(`${apiBaseUrl}/${person.id}`, person)\r\n    .then(response => response.data);\r\n\r\nconst remove = (id) => axios\r\n    .delete(`${apiBaseUrl}/${id}`)\r\n    .then(response => response.data);\r\n\r\nexport default { getAll, getOne, create, update, remove };\r\n","import React from 'react';\r\n\r\nconst Notification = ({ text, isError }) => text ? (\r\n    <div className={['notification', isError ? 'failure' : 'success'].join(' ')}>\r\n        {text}\r\n    </div>\r\n) : null;\r\n\r\nexport default Notification;","import React, { useState, useEffect } from 'react';\nimport TextFilter from './components/TextFilter';\nimport AddPersonForm from './components/AddPersonForm';\nimport PersonList from './components/PersonList';\nimport personsService from './services/persons.service';\nimport Notification from './components/Notification';\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState('');\n  const [newNumber, setNewNumber] = useState('');\n  const [searchString, setSearchString] = useState('');\n  const [errorMessage, setErrorMessage] = useState(null);\n  const [successMessage, setSuccessMessage] = useState(null);\n  const notificationTimeout = 6000;\n\n  useEffect(() => {\n    personsService.getAll().then(data => setPersons(data));\n  }, []);\n\n  const setError = (error, defaultMessage) => {\n    const message = error.response.data ? `Virhetilanne: ${error.response.data.error}` : defaultMessage;\n    setErrorMessage(message);\n    setTimeout(() => {\n      setErrorMessage(null);\n    }, notificationTimeout)\n  };\n\n  const setSuccess = (message) => {\n    setSuccessMessage(message);\n    setTimeout(() => {\n      setSuccessMessage(null);\n    }, notificationTimeout)\n  };\n\n  const createPerson = (name, number) => {\n    personsService\n      .create({ name, number })\n      .then(person => {\n        setPersons(persons.concat(person));\n        setNewName('');\n        setNewNumber('');\n        setSuccess(`Lisättiin luetteloon ${person.name}`);\n      })\n      .catch(error => {\n        setError(error, error.message);\n        personsService.getAll().then(data => setPersons(data));\n      });\n  };\n\n  const tryUpdatePerson = (name, number) => {\n    const proceed = personExists(name) && window.confirm(`${name} on jo luettelossa. Korvataanko vanha numero uudella?`);\n    if (!proceed) {\n      return;\n    }\n\n    const idx = persons.findIndex(p => p.name === name);\n    const update = { ...persons[idx], number };\n    personsService\n      .update(update)\n      .then(() => {\n        const newState = [...persons];\n        newState[idx] = update;\n        setPersons(newState);\n        setNewName('');\n        setNewNumber('');\n        setSuccess(`Päivitettiin ${update.name}`);\n      })\n      .catch(error => {\n        setError(error, `Virhetilanne: ${update.name} lienee jo poistettu. Yritä tallentaa uudelleen.`);\n        personsService.getAll().then(data => setPersons(data));\n      });\n  };\n\n  const removePerson = (person) => {\n    if (window.confirm(`Vahvista henkilön ${person.name} poisto`)) {\n      personsService\n        .remove(person.id)\n        .then(() => {\n          const updated = [...persons];\n          const idx = updated.findIndex(p => p.id === person.id);\n          if (idx !== -1) {\n            updated.splice(idx, 1);\n          }\n          setPersons(updated);\n          setSuccess(`Poistettiin ${person.name}`);\n        })\n        .catch(error => {\n          setError(error, `Virhetilanne: ${person.name} lienee jo poistettu`);\n          personsService.getAll().then(data => setPersons(data));\n        });\n    }\n  };\n\n  const personExists = name => persons.findIndex(p => p.name === name) !== -1;\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    if (personExists(newName)) {\n      return tryUpdatePerson(newName, newNumber);\n    }\n\n    createPerson(newName, newNumber);\n  };\n\n  const visiblePersons = persons.filter(p => p.name.toLowerCase().indexOf(searchString.toLowerCase()) !== -1);\n  const handleNameChange = event => setNewName(event.target.value);\n  const handleNumberChange = event => setNewNumber(event.target.value);\n  const filterCollection = event => setSearchString(event.target.value);\n\n  return (\n    <div>\n      <h1>Puhelinluettelo</h1>\n      <TextFilter text=\"rajaa näytettäviä\" handleChange={filterCollection} />\n      <h2>Lisää uusi</h2>\n      <Notification text={errorMessage} isError={true} />\n      <Notification text={successMessage} isError={false} />\n      <AddPersonForm\n        handleSubmit={handleSubmit}\n        newName={newName}\n        handleNameChange={handleNameChange}\n        newNumber={newNumber}\n        handleNumberChange={handleNumberChange} />\n      <h2>Numerot</h2>\n      <PersonList persons={visiblePersons} removeHandler={removePerson} />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}