(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,n,t){e.exports=t(40)},20:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),u=t(12),c=t.n(u),l=(t(20),t(5)),i=t(13),o=t(2),m=function(e){var n=e.text,t=e.handleChange;return r.a.createElement("div",null,n," ",r.a.createElement("input",{onChange:t}))},f=function(e){var n=e.label,t=e.placeholder,a=e.value,u=e.handleChange;return r.a.createElement("div",null,r.a.createElement("label",null,n),r.a.createElement("input",{placeholder:t,value:a,onChange:u}))},h=function(e){var n=e.handleSubmit,t=e.newName,a=e.handleNameChange,u=e.newNumber,c=e.handleNumberChange;return r.a.createElement("form",{onSubmit:n},r.a.createElement(f,{label:"nimi:",placeholder:"Uusi henkil\xf6",value:t,handleChange:a}),r.a.createElement(f,{label:"numero:",placeholder:"01234567890",value:u,handleChange:c}),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"lis\xe4\xe4")))},s=function(e){var n=e.person,t=e.handleClick;return r.a.createElement("li",null,r.a.createElement("span",null,n.name,": ",n.number," "),r.a.createElement("button",{onClick:function(){return t(n)}},"poista"))},d=function(e){var n=e.persons,t=e.removeHandler;return r.a.createElement("ul",null,n.map(function(e){return r.a.createElement(s,{key:e.id,person:e,handleClick:t})}))},b=t(3),v=t.n(b),E="http://localhost:3001/api/persons",p=function(){return v.a.get(E).then(function(e){return e.data})},j=function(e){return v.a.post(E,e).then(function(e){return e.data})},O=function(e){return v.a.put("".concat(E,"/").concat(e.id),e).then(function(e){return e.data})},g=function(e){return v.a.delete("".concat(E,"/").concat(e)).then(function(e){return e.data})},w=function(e){var n=e.text,t=e.isError;return n?r.a.createElement("div",{className:["notification",t?"failure":"success"].join(" ")},n):null},C=function(){var e=Object(a.useState)([]),n=Object(o.a)(e,2),t=n[0],u=n[1],c=Object(a.useState)(""),f=Object(o.a)(c,2),s=f[0],b=f[1],v=Object(a.useState)(""),E=Object(o.a)(v,2),C=E[0],x=E[1],N=Object(a.useState)(""),k=Object(o.a)(N,2),S=k[0],y=k[1],I=Object(a.useState)(null),L=Object(o.a)(I,2),P=L[0],V=L[1],H=Object(a.useState)(null),J=Object(o.a)(H,2),T=J[0],B=J[1];Object(a.useEffect)(function(){p().then(function(e){return u(e)})},[]);var D=function(e){V(e),setTimeout(function(){V(null)},6e3)},K=function(e){B(e),setTimeout(function(){B(null)},6e3)},U=function(e){return-1!==t.findIndex(function(n){return n.name===e})},Y=t.filter(function(e){return-1!==e.name.toLowerCase().indexOf(S.toLowerCase())});return r.a.createElement("div",null,r.a.createElement("h1",null,"Puhelinluettelo"),r.a.createElement(m,{text:"rajaa n\xe4ytett\xe4vi\xe4",handleChange:function(e){return y(e.target.value)}}),r.a.createElement("h2",null,"Lis\xe4\xe4 uusi"),r.a.createElement(w,{text:P,isError:!0}),r.a.createElement(w,{text:T,isError:!1}),r.a.createElement(h,{handleSubmit:function(e){if(e.preventDefault(),U(s))return function(e,n){if(U(e)&&window.confirm("".concat(e," on jo luettelossa. Korvataanko vanha numero uudella?"))){var a=t.findIndex(function(n){return n.name===e}),r=Object(i.a)({},t[a],{number:n});O(r).then(function(){var e=Object(l.a)(t);e[a]=r,u(e),b(""),x(""),K("P\xe4ivitettiin ".concat(r.name))}).catch(function(e){D("Virhetilanne: ".concat(r.name," lienee jo poistettu. Yrit\xe4 tallentaa uudelleen.")),p().then(function(e){return u(e)})})}}(s,C);j({name:s,number:C}).then(function(e){u(t.concat(e)),b(""),x(""),K("Lis\xe4ttiin luetteloon ".concat(e.name))})},newName:s,handleNameChange:function(e){return b(e.target.value)},newNumber:C,handleNumberChange:function(e){return x(e.target.value)}}),r.a.createElement("h2",null,"Numerot"),r.a.createElement(d,{persons:Y,removeHandler:function(e){window.confirm("Vahvista henkil\xf6n ".concat(e.name," poisto"))&&g(e.id).then(function(){var n=Object(l.a)(t),a=n.findIndex(function(n){return n.id===e.id});-1!==a&&n.splice(a,1),u(n),K("Poistettiin ".concat(e.name))}).catch(function(n){D("Virhetilanne: ".concat(e.name," lienee jo poistettu")),p().then(function(e){return u(e)})})}}))};c.a.render(r.a.createElement(C,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.56151340.chunk.js.map